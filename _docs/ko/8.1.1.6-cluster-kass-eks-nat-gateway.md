---
title: "8.1.1.6 EKS NAT Gateway 사용"
excerpt: ""
permalink: /docs/ko/8.1.1.6/
redirect_from:
  - /theme-setup/
toc: false
toc_sticky: false
---

---
### EKS NAT Gateway 구성도

  ![EKS-NAT-Gateway]({{ site.baseurl }}/assets/KR/{{ site.version }}/EKS/eks-nat-gateway.png)  
  
참고 : <https://blog.2dal.com/2018/12/31/nat-gateway-to-nat-instance/>  

### Name 규칙  
zone 으로 구분 되는 경우 zone 명칭을 사용 한다.

  * EKS Cluster  name : cocktail-eks-cluster (중복 될수 없다.)
  
  * VPC name : eks-cluster-vpc
  
  * Subnets name :
    
    - availability zone A : Public subnet-<A zone> , Private subnet-<A zone>
	
    - availability zone B : Public subnet-<B zone> , Private subnet-<B zone>

  * Route Tables :
  
    - Public-subnet-rtb
    
    - Private-subnet-<A zone>-rtb , Private-subnet-<B zone>-rtb
	
  * Security Group :
  
    - EKS Control Plane name : <cluster-name>-control-plane-sg
	
    - Work node name : CloudFormation 에서 work node 생성시 자동 생성 됨
    
### 1. VPC 생성

  * Elastic IP address 생성 for NAT Gateway * 2개

  * VPC(name: eks-cluster-vpc) 설정

    * Run the VPC Wizard

      * VPC Dashboard 클릭 > Launch VPC Wizard 클릭 > VPC with Public and Private Subnets 선택(select)

        a. IPv4 CIDR block: : 10.0.0.0/16 (사용자가 사용 할 CIDR block 구성)

        b. VPC name : eks-cluster-vpc

        c. Public subnet's IPv4 CIDR : 10.0.10.0/24  - example

        d. Availability Zone :  <A zone> 선택

        e. Public subnet name : Public subnet-<A zone>

        --

        f. Private subnet's IPv4 CIDR : 10.0.20.0/24 - example

        g. Availability Zone :  <A zone> - public subnet 과 같은 zone 선택

        h. Private subnet name : Private subnet-<A zone>

        --

        i. Elastic IP Allocation ID : 위에서 생성한 EIP 선택 - NAT Gateway 자동 생성됨

        j. Create VPC 클릭

        ---
        
        참고 : 

         * Public subnet-<A zone> 에 Route table 의 Target 이 internet gateway 으로 자동 설정됨.

         * Private subnet-<A zone> 에 Route table 의 Target 이 Wizard 로 생성된 nat gateway 로 자동 설정됨.





