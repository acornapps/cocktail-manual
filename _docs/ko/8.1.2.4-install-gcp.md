---
title: "칵테일 Installation to Aliyun"
excerpt: ""
permalink: /docs/ko/8.1.2.4/
redirect_from:
  - /theme-setup/
toc: true
toc_sticky: true
---

---
[Google cloud](https://google.com/ko-kr/)에 칵테일을 설치하는 과정은 다음과 같다.

**사전준비**

설치 전 인스턴스 및 아래와 같은 프로그램들이 미리 설치 되어 있어야 하며 설치 되어 있지 않을 경우 에러 메시지가 발생한다.

1\) 제공받은 cube 바이너리를 어느 디렉토리에서든 사용할 수 있도록 환경변수 path 설정을 한다.

2\) Docker 다운로드 후 설치

[Get Docker CE for CentOS](https://docs.docker.com/install/linux/docker-ce/centos/)


### **설치**

**1. 설치를 위해 빈 디렉토리를 만든 후 해당 디렉토리로 이동한다.**

```
# mkdir /Desktop/cube
# cd /Desktop/cube
```

**2. cube 명령을 이용하여 gcp용 설치 script를 download 받고 초기화 한다.**

```
# cube init -p gcp
```

**3. cube.yaml 파일을 편집기로 열어서 설치하고자 하는 Azure 정보 및 인스턴스 정보를 기입한다.**

```
[cube]
version = "1.13.1-r2"
provider = false
cluster-name = "test-cluster"
cluster-description = "This is test cluster"
cluster-type = "small"
cluster-id = "test-cluster-id"
alert-language = "ko"


[kubenetes]
service-cidr = "10.96.0.0/12"
pod-cidr = "10.10.0.0/16"

  [kubenetes.etcd]
  ip = [
    "<Your Primary internal IP>"
  ]

[node-pool]
data-dir = "/data"

  [node-pool.provider]
  name = "gcp"
  location = "default"

  [node-pool.security]
  ssh-user-id = ""
  private-key-path = ""
  key-path = ""

  [node-pool.master]
  name = "master"
  ip = [
    "<Your Primary internal IP>"
  ]
  loadbalancer-ip = ""
  ingress-host = ""
  node-port-url = ""
  node-portrange = "30000-32767"

  [[node-pool.nodes]]
  name = "default"
  ip = [
    "<Your Primary internal IP>"
  ]

[enterprise-product]
install = true
release-name = "cocktail"
https = false
  [enterprise-product.cert-file]
  ssl-certificate = ""
  ssl-certificate-key = ""

[addon]
install = true

[shared-storage]
install = true
name = "shared"
storage-ip = "<Your Primary internal IP>"
storage-mount-dir = "/storage"
storage-volume-size = 100

[private-registry]
install = true
name = "harbor"
registry-ip = "<Your Primary internal IP>"
data-dir = "/data"
public-cert = false
  [private-registry.cert-file]
  ssl-certificate = ""
  ssl-certificate-key = ""
```

상기 항목에서 private_key_path 와 key\_path 는 서버에 ssh key로 접속하기 위한 private key와 public key의 경로를 기입한다. 이미 존재하는 경우에는 해당 경로를 기입하면 되고, 신규로 생성할 경우에는 아래 절차대로 실행하면 된다.

&lt; ssh key 신규 발급 방법 &gt;

```
# ssh-keygen -f /path/to/private_file -t rsa -N ''
```

**4. cube create 명령을 이용하여 청지윈을 설치한다.**

```
# cube create
```

**5. 오류없이 설치가 완료되면 system을 구성하는 컨테이너가 정상적으로 기동되고 있는지 아래 명령으로 확인한다.**

```
# cube status
```

**6. 브라우저로 **[http://lb:8080으로](http://lb:8080으로)** 접속하면 청지윈 login 화면으로 접속할 수 있다. (초기 접속 계정: admin/Pass0000)

### **삭제**

**1. 더 이상 필요하지 않을 경우에는 아래 명령으로 삭제할 수 있다.**

디폴트로 옵션을 주지 않는 경우에는 생성한 k8s cluster만 삭제하고 설치 스크립트는 그대로 유지하며, -f 옵션을 추가하면 생성된 aws infra를 삭제하고 cube.yaml 파일을 cube.yaml.org로 백업파일을 생성한 후 설치스크립트도 모두 삭제하게 된다.

따라서, 이 명령어는 주의해서 실행해야 한다.

```
# cd /Desktop/cube

// Cluster 삭제하고 설치 스크립트는 그대로 유지
# cube destroy
```

삭제한 후에 다시 설치하기 위해서는 cube init 명령을 통해 설치 스크립트를 다시 다운로드 받은 후 설치하면 된다.